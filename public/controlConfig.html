<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Control Config</title>
  <link rel="stylesheet" href="/css/controller-mapper.css" />
</head>
<body>
  <header>
    <main class="inline" style="justify-content:space-between">
      <div>
        <h1>Control Config</h1>
        <div class="muted">Plug in a controller and press any button to begin.</div>
      </div>
      <div class="inline">
        <button id="btn-export" class="btn">Export JSON</button>
        <label class="btn secondary" for="file-import">Import JSON</label>
        <input id="file-import" type="file" accept="application/json" hidden />
      </div>
    </main>
  </header>

  <main class="grid">
    <section class="card">
      <h2>Status</h2>
      <div class="stack">
        <div class="row"><div class="muted">Connection</div><div id="status" class="pill">Waiting…</div></div>
        <div class="row"><div class="muted">Gamepad</div><div id="pad-id" class="kbd">—</div></div>
        <div class="row">
          <div class="muted">Mapping</div>
          <div class="inline">
            <span class="kbd nowrap" id="mapping">—</span>
            <button id="btn-clear" class="btn secondary small">Clear Saved Mapping</button>
          </div>
        </div>
        <div class="row">
          <div class="muted">Deadzones & Options</div>
          <div class="inline small">
            LS Deadzone <input id="dz-ls" type="range" min="0" max="0.5" step="0.01" value="0.15" class="slider" />
            <span id="dz-ls-val" class="kbd">0.15</span>
            RS Deadzone <input id="dz-rs" type="range" min="0" max="0.5" step="0.01" value="0.15" class="slider" />
            <span id="dz-rs-val" class="kbd">0.15</span>
            <label class="inline"><input id="invert-y" type="checkbox" /> Invert Y</label>
          </div>
        </div>
        <div class="row">
          <div class="muted">Live Input</div>
          <div class="stack">
            <div class="inputs" id="buttons"></div>
            <div class="small mono" id="axes"></div>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Actions & Rebindings</h2>
      <table class="table small" id="actions-table">
        <thead><tr><th>Action</th><th>Binding</th><th></th></tr></thead>
        <tbody id="actions-body"></tbody>
      </table>
      <div class="hr"></div>
      <div class="small muted">
        Click <b>Rebind</b>, then press a button or move a stick. Axis bindings capture the axis with the largest motion.
      </div>
    </section>

    <section class="card">
      <h2>Preview (Use This In Your Game Loop)</h2>
      <pre class="small mono" style="white-space:pre-wrap">
import { getActionState } from '/js/gamepad-core.js';

const state = getActionState();
// state.moveX, state.moveY, state.lookX, state.lookY  (-1..1)
// state.jump, state.shoot, state.dash, state.menu
